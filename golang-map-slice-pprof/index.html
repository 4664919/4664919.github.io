	<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.16-DEV" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>  &middot; simons blog </title>

  
  <link rel="stylesheet" href="http://blog.simonsun.net/css/poole.css">
  <link rel="stylesheet" href="http://blog.simonsun.net/css/syntax.css">
  <link rel="stylesheet" href="http://blog.simonsun.net/css/hyde.css">
  <link rel="stylesheet" href="http://blog.simonsun.net/css/fonts.googleapis.com.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="simons blog" />
  
  <script src="http://blog.simonsun.net/js/jquery.min.js"></script>
  <script src="http://blog.simonsun.net/js/highlight.min.js"></script>
  <link rel="stylesheet" href="http://blog.simonsun.net/js/highlight-github.min.css">
  
  <script>hljs.initHighlightingOnLoad();</script>
  <script type="text/javascript">
  $(document).ready(function() {
       
       
       
          });
</script>
</head>

	<body class="theme-base-08">
		<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://blog.simonsun.net/"><h1>simons blog</h1></a>
      <p class="lead">
       这里是Simon Sun的个人博客 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
        <li><a href="/golang-beego-use/"> BeeGo初探 </a></li>
      
        <li><a href="/golang-code-source/"> Golang 源码初探 </a></li>
      
        <li><a href="/logv3/"> golang日志系统架构设计 </a></li>
      
        <li><a href="/welcome/"> 你好，Hugo </a></li>
      
        <li><a href="/s/"> 你好，Hugo2 </a></li>
      
        <li><a href="/golang-testing/"> 测试相关－golang </a></li>
      
        <li><a href="/arithmetic-binary-search/"> 算法 － 二分查找(Binary Search) </a></li>
      
        <li><a href="/golang-testing-code-coverage/"> 覆盖率测试－测试相关－golang </a></li>
      
    </ul>

    <p>&copy; 2016. All rights reserved. </p>
  </div>
</div>


		<div class="content container">
			<div class="post">
			 	<h1></h1>
			  <span class="post-date">0001-01-01</span>
			      

<p>title: golang map 、 slice性能对比
tags:
  - golang
  - pprof
  - 性能
  - 性能优化</p>

<h2 id="date-2015-05-07-17-51-12:334a929af4ce8f704f122454c602a299">date: 2015-05-07 17:51:12</h2>

<p>#todo</p>

<p>做了一次对比,查看map、slice之间的性能差距，由于golang底层对map、slice都是用array实现的，所以他们之间性能差距其实并不大</p>

<p>访问：<a href="http://localhost:6060/debug/pprof/">http://localhost:6060/debug/pprof/</a> 查看pprof</p>

<p>{% codeblock lang:golang %}
package main</p>

<p>import (
    &ldquo;fmt&rdquo;
    &ldquo;log&rdquo;
    &ldquo;net/http&rdquo;
    _ &ldquo;net/http/pprof&rdquo;
    &ldquo;strconv&rdquo;
    &ldquo;time&rdquo;
)</p>

<p>var run_count = 1000 * 10000 //千万长度</p>

<p>func main() {
    go func() {
        log.Println(http.ListenAndServe(&ldquo;localhost:6060&rdquo;, nil))
    }()
    //testMap()
    testSlice()
    for {
        fmt.Println(&ldquo;睡眠了2秒&rdquo;)
        time.Sleep(2e9)
    }</p>

<p>}</p>

<p>func testMap() {</p>

<pre><code>var m map[string]bool = make(map[string]bool)
for i := 0; i &lt;= run_count; i++ {
    m[strconv.Itoa(i)] = true
}
</code></pre>

<p>}
func testSlice() {</p>

<pre><code>var slice []string
for i := 0; i &lt;= run_count; i++ {
    slice = append(slice, strconv.Itoa(i))
}
</code></pre>

<p>}
{% endcodeblock %}</p>

			</div>

			
		</div>

  </body>
</html>
